<h1>Adnat</h1>

<h2><%= current_user.organisation.name %></h2>

<h3>Shifts</h3>

  <table border="2">
    <tr>
      <th>Employee Name</th>
      <th>Shift Date</th>
      <th>Start Time</th>
      <th>Finish Time</th>
      <th>Break Length</th>
      <th>Hours Worked</th>
      <th>Shift Cost</th>
    </tr>
     <% @shifts.each do |shift| %>
    <tr>
      <td><%= shift.employee_name %></td>
      <td><%= shift.start %></td>
      <td><%= shift.start %></td>
      <td><%= shift.finish %></td>
      <td><%= shift.break_length %></td>
      <td><%= shift.hours_worked %></td>
      <td><%= shift.shift_cost %></td>
    </tr>
    <% end %>
    <tr>
      <%= form_tag "/shifts", id: 'shift_form' do %>
        <td><%= text_field_tag :employee_name, current_user.name %></td>
        <td><%= date_field_tag :start_date %></td>
        <td><%= time_field_tag :start_time %></td>
        <td><%= time_field_tag :finish %></td>
        <td><%= number_field_tag :break_length %></td>
        <td colspan="2"><%= submit_tag %></td>
      <% end %>
    </tr>
  </table>

<script type="text/javascript">
  $("#shift_form").submit(function(){
    $.ajax({
      url: "/shifts",
      method: "POST",
      data: {
        employee_name: $("#employee_name").val(),
        start_date: $("#start_date").val(),
        start_time: $("#start_time").val(),
        finish: $("#finish").val(),
        break_length: $("#break_length").val(),

      },
      success: function(result){
        console.log(result);
      }
    });
    return false;
  });
</script>